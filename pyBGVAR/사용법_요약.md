# pyBGVAR ì‚¬ìš©ë²• ìš”ì•½

## ğŸ“¦ ì„¤ì¹˜

```bash
cd pyBGVAR
pip install -e .
```

## ğŸš€ ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°

```python
from pyBGVAR import BGVAR, get_shockinfo

# 1. ëª¨ë¸ ì¶”ì •
model = BGVAR(Data=data_dict, W=weight_matrix, plag=1, draws=5000, burnin=5000, prior="NG")

# 2. ìš”ì•½
summary = model.summary()

# 3. IRF
shockinfo = get_shockinfo(ident="chol", nr_rows=1)
shockinfo.loc[0, 'shock'] = 'US.y'
irf_result = model.irf(n_ahead=24, shockinfo=shockinfo)

# 4. FEVD
from pyBGVAR import compute_fevd
fevd_result = compute_fevd(irf_result)

# 5. ì˜ˆì¸¡
fcast = model.predict(n_ahead=8)
```

## ğŸ“Š ì£¼ìš” í•¨ìˆ˜ ì¹˜íŠ¸ì‹œíŠ¸

### ëª¨ë¸ í´ë˜ìŠ¤ (BGVAR)

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `BGVAR()` | ëª¨ë¸ ì¶”ì • | `BGVAR(Data=data, W=W, plag=1)` |
| `.summary()` | ìš”ì•½ í†µê³„ | `model.summary()` |
| `.irf()` | IRF ê³„ì‚° | `model.irf(n_ahead=24, shockinfo=s)` |
| `.predict()` | ì˜ˆì¸¡ | `model.predict(n_ahead=8)` |
| `.coef()` | ê³„ìˆ˜ ì¶”ì¶œ | `model.coef(quantile=0.5)` |
| `.vcov()` | ê³µë¶„ì‚° | `model.vcov()` |
| `.fitted()` | ì í•©ê°’ | `model.fitted()` |
| `.residuals()` | ì”ì°¨ | `model.residuals()` |
| `.logLik()` | ë¡œê·¸ ê°€ëŠ¥ë„ | `model.logLik()` |
| `.dic()` | DIC | `model.dic()` |

### IRF í•¨ìˆ˜

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `get_shockinfo()` | ì¶©ê²© ì •ë³´ ìƒì„± | `get_shockinfo(ident="chol", nr_rows=1)` |
| `add_shockinfo()` | ë¶€í˜¸ ì œì•½ ì¶”ê°€ | `add_shockinfo(None, shock='US.y', sign=['+'])` |

### FEVD í•¨ìˆ˜

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `compute_fevd()` | ì¼ë°˜ FEVD | `compute_fevd(irf_result)` |
| `gfevd()` | ì¼ë°˜í™” FEVD | `gfevd(model, n_ahead=24)` |

### Historical Decomposition

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `hd()` | ì—­ì‚¬ì  ë¶„í•´ | `hd(irf_result, var_slct=['US.y'])` |

### ì˜ˆì¸¡ í‰ê°€

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `lps()` | Log-Predictive Score | `lps(fcast_result)` |
| `rmse()` | RMSE | `rmse(fcast_result)` |

### ì§„ë‹¨ í•¨ìˆ˜

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `conv_diag()` | ìˆ˜ë ´ ì§„ë‹¨ | `conv_diag(model)` |
| `resid_corr_test()` | ì”ì°¨ ê²€ì • | `resid_corr_test(model)` |
| `avg_pair_cc()` | êµì°¨ ìƒê´€ | `avg_pair_cc(model)` |

### ìœ í‹¸ë¦¬í‹°

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `matrix_to_list()` | í–‰ë ¬â†’ë”•ì…”ë„ˆë¦¬ | `matrix_to_list(df)` |
| `list_to_matrix()` | ë”•ì…”ë„ˆë¦¬â†’í–‰ë ¬ | `list_to_matrix(data_dict)` |
| `excel_to_list()` | Excel ì½ê¸° | `excel_to_list('data.xlsx')` |

### ì‹œê°í™”

| í•¨ìˆ˜ | ìš©ë„ | ì˜ˆì œ |
|------|------|------|
| `plot.plot_irf()` | IRF í”Œë¡¯ | `plot_irf(irf_result, resp=['US.y'])` |
| `plot.plot_fevd()` | FEVD í”Œë¡¯ | `plot_fevd(fevd_result, resp='US.y')` |
| `plot.plot_pred()` | ì˜ˆì¸¡ í”Œë¡¯ | `plot_pred(fcast, resp=['US.y'])` |
| `plot.plot_hd()` | HD í”Œë¡¯ | `plot_hd(hd_result, resp='US.y')` |

## ğŸ“ ë°ì´í„° í˜•ì‹

### ì…ë ¥ ë°ì´í„°

**ë°©ë²• 1: Dictionary**
```python
data_dict = {
    'US': pd.DataFrame({'y': [...], 'Dp': [...], 'stir': [...]}),
    'EA': pd.DataFrame({'y': [...], 'Dp': [...], 'stir': [...]}),
    ...
}
```

**ë°©ë²• 2: DataFrame**
```python
data_matrix = pd.DataFrame({
    'US.y': [...],
    'US.Dp': [...],
    'EA.y': [...],
    ...
})
```

### ê°€ì¤‘ì¹˜ í–‰ë ¬ (W)

```python
W = pd.DataFrame(
    [[0.0, w12, w13],
     [w21, 0.0, w23],
     [w31, w32, 0.0]],
    index=['US', 'EA', 'UK'],
    columns=['US', 'EA', 'UK']
)
```

**ì¤‘ìš”**: ê° í–‰ì˜ í•©(ëŒ€ê°ì„  ì œì™¸)ì´ 1ì´ ë˜ì–´ì•¼ í•¨

## âš™ï¸ ì£¼ìš” íŒŒë¼ë¯¸í„°

### BGVAR ëª¨ë¸

```python
model = BGVAR(
    Data=...,           # ë°ì´í„° (dict ë˜ëŠ” DataFrame)
    W=...,              # ê°€ì¤‘ì¹˜ í–‰ë ¬
    plag=1,             # ë‚´ìƒë³€ìˆ˜ ì‹œì°¨ (ê¸°ë³¸ 1)
    draws=5000,         # MCMC ì¶”ì¶œ ìˆ˜ (ê¸°ë³¸ 5000)
    burnin=5000,        # Burn-in (ê¸°ë³¸ 5000)
    prior="NG",         # Prior: "MN", "SSVS", "NG", "HS"
    SV=True,            # Stochastic Volatility (ê¸°ë³¸ True)
    hold_out=0,         # Hold-out ìƒ˜í”Œ (ê¸°ë³¸ 0)
    thin=1,             # Thinning (ê¸°ë³¸ 1)
    eigen=True,         # ì•ˆì •ì„± ê²€ì‚¬ (ê¸°ë³¸ True)
    trend=False,        # ì¶”ì„¸ í¬í•¨ (ê¸°ë³¸ False)
    verbose=True        # ì§„í–‰ìƒí™© ì¶œë ¥ (ê¸°ë³¸ True)
)
```

### IRF

```python
irf_result = model.irf(
    n_ahead=24,         # ì˜ˆì¸¡ ê¸°ê°„
    shockinfo=...,      # ì¶©ê²© ì •ë³´
    quantiles=None,     # ë¶„ìœ„ìˆ˜ (ê¸°ë³¸: [0.05, 0.16, 0.5, 0.84, 0.95])
    verbose=True        # ì§„í–‰ìƒí™© ì¶œë ¥
)
```

### ì˜ˆì¸¡

```python
fcast = model.predict(
    n_ahead=8,          # ì˜ˆì¸¡ ê¸°ê°„
    constr=None,        # ì¡°ê±´ë¶€ ì œì•½ (array or None)
    constr_sd=None,     # ì œì•½ í‘œì¤€í¸ì°¨
    quantiles=None,     # ë¶„ìœ„ìˆ˜
    save_store=False,   # ì‚¬í›„ë¶„í¬ ì €ì¥ ì—¬ë¶€
    verbose=True        # ì§„í–‰ìƒí™© ì¶œë ¥
)
```

## ğŸ’¡ ì‹¤ì „ íŒ

### 1. Prior ì„ íƒ ê°€ì´ë“œ

| Prior | íŠ¹ì§• | ì¶”ì²œ ìƒí™© |
|-------|------|-----------|
| **MN** (Minnesota) | ë¹ ë¦„, ê°„ë‹¨ | ë¹ ë¥¸ í…ŒìŠ¤íŠ¸, í° ëª¨ë¸ |
| **SSVS** | ë³€ìˆ˜ ì„ íƒ | ì¤‘ìš” ë³€ìˆ˜ ì‹ë³„ í•„ìš” |
| **NG** (Normal-Gamma) | ê· í˜•ì¡íŒ ì„±ëŠ¥ | **ì¼ë°˜ì  ê¶Œì¥** |
| **HS** (Horseshoe) | í¬ì†Œì„± ìœ ë„ | ë§ì€ ë³€ìˆ˜, ì‘ì€ í‘œë³¸ |

### 2. MCMC ì„¤ì • ê°€ì´ë“œ

| ëª©ì  | draws | burnin | thin |
|------|-------|--------|------|
| ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ | 100 | 100 | 1 |
| ê¸°ë³¸ ë¶„ì„ | 5000 | 5000 | 1 |
| ë°œí‘œ/ë…¼ë¬¸ | 10000 | 5000 | 10 |
| í° ëª¨ë¸ | 20000 | 10000 | 20 |

### 3. IRF ì‹ë³„ ë°©ë²• ì„ íƒ

| ë°©ë²• | ì¥ì  | ë‹¨ì  | ì¶”ì²œ ìƒí™© |
|------|------|------|-----------|
| **Cholesky** | ê°„ë‹¨, ë¹ ë¦„ | ìˆœì„œ ì˜ì¡´ì  | ìˆœì„œê°€ ëª…í™•í•  ë•Œ |
| **GIRF** | ìˆœì„œ ë¬´ê´€ | êµ¬ì¡°ì  í•´ì„ ì–´ë ¤ì›€ | íƒìƒ‰ì  ë¶„ì„ |
| **Sign restrictions** | ê²½ì œ ì´ë¡  ë°˜ì˜ | ë³µì¡, ëŠë¦¼ | ê²½ì œ ì´ë¡  ê¸°ë°˜ ë¶„ì„ |

### 4. ë©”ëª¨ë¦¬ ê´€ë¦¬

```python
# ë©”ëª¨ë¦¬ íš¨ìœ¨ì  ì„¤ì •
model = BGVAR(
    Data=data, W=W,
    draws=10000, thin=10,  # ì‹¤ì œ ì €ì¥: 1000ê°œ
    SV=False,              # SV ë¹„í™œì„±í™”
    eigen=True             # ë¶ˆì•ˆì •í•œ ì¶”ì¶œ ì œê±°
)

# FEVD/GFEVDì—ì„œ running mean ì‚¬ìš©
gfevd_result = gfevd(model, running=True)  # ì „ì²´ ì €ì¥ ì•ˆí•¨
```

### 5. ë””ë²„ê¹…

```python
# ì§„í–‰ìƒí™© í™•ì¸
model = BGVAR(Data=data, W=W, verbose=True)

# ìˆ˜ë ´ í™•ì¸
from pyBGVAR import conv_diag
conv_result = conv_diag(model)
print(conv_result['perc'])

# ì”ì°¨ í™•ì¸
residuals = model.residuals()
import matplotlib.pyplot as plt
plt.plot(residuals['country'][0, :, 0])  # ì²« ë²ˆì§¸ ì¶”ì¶œ, ëª¨ë“  ì‹œì , ì²« ë²ˆì§¸ ë³€ìˆ˜
```

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- **ìƒì„¸ ì˜ˆì œ**: `example_usage.py`
- **ë¹ ë¥¸ ì‹œì‘**: `QUICKSTART.md`
- **ì™„ì „ ë¬¸ì„œ**: `README.md`
- **êµ¬í˜„ ìƒì„¸**: `COMPLETE_IMPLEMENTATION.md`
- **í•œê¸€ ë³´ê³ ì„œ**: `êµ¬í˜„_ì™„ë£Œ_ë³´ê³ ì„œ.md`

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì  ì—ëŸ¬

**1. "No stable posterior draws"**
```python
# í•´ê²°: burnin ì¦ê°€ ë˜ëŠ” eigen ë¹„í™œì„±í™”
model = BGVAR(Data=data, W=W, burnin=10000, eigen=False)
```

**2. "Memory error"**
```python
# í•´ê²°: thinning ì‚¬ìš©
model = BGVAR(Data=data, W=W, draws=10000, thin=10)
```

**3. "Singular matrix"**
```python
# í•´ê²°: ë³€ìˆ˜ ì¤„ì´ê¸° ë˜ëŠ” prior ë³€ê²½
model = BGVAR(Data=data, W=W, prior="HS")  # í¬ì†Œì„± ìœ ë„
```

**4. "Too slow"**
```python
# í•´ê²°: draws ì¤„ì´ê¸°, SV ë¹„í™œì„±í™”, ë˜ëŠ” ë” ê°„ë‹¨í•œ prior
model = BGVAR(Data=data, W=W, draws=1000, SV=False, prior="MN")
```

## ğŸ“§ ë„ì›€ ë°›ê¸°

- GitHub Issues
- ì´ë©”ì¼
- ì›ë³¸ R íŒ¨í‚¤ì§€ ë¬¸ì„œ: https://cran.r-project.org/package=BGVAR

---

**Happy Modeling!** ğŸ“ˆğŸ‰

